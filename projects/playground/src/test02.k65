[
	SCREENWIDTH=160, // rozmiar ekranu gry wynika z wybranego trybu ANTIC-a
	SCREENHEIGHT=80, // liczba linii na DL
	SCREENSIZE=SCREENWIDTH/4*SCREENHEIGHT // rozmiar obrazu w pamięci 4 pieksele na bajt
]

// pamięć ekranu gry
data gamescreen {
	for x=0..[SCREENSIZE-1] eval [0x55]
}

data sprite1data {
	0b11001100
	0b11001100
	0b11001100
	0b11001100
	0b11001100
	0b11001100
}

// DL
data displaylist {
	nocross
	0x70 0x70 0x70
	0b01001101 &<gamescreen &>gamescreen
	for x=1..[SCREENHEIGHT-1] eval [0x0D]
	0x41 &<displaylist &>displaylist		// pętla DL
}

var DLISTL = 0x0230;
var DLISTH = 0x0231;
var DMACTL = 0xD400;
var COLPF0S = 0x02C4;
var COLPF1S = 0x02C5;
var COLPF2S = 0x02C6;
var COLBKS = 0x02C8;

var WSYNC = 0xD40B;
var VCOUNT = 0xD40B;

var ADDRHANDLERL = 0x80;
var ADDRHANDLERH = 0x81;
var SCREENADDRHANDLERL = 0x82;
var SCREENADDRHANDLERH = 0x83;

inline draw {
	ADDRHANDLERL=a=&<sprite1data
	ADDRHANDLERH=a=&>sprite1data
	SCREENADDRHANDLERL=a=&<gamescreen
	SCREENADDRHANDLERH=a=&>gamescreen
	y=2 { x=0 (SCREENADDRHANDLERL,x)=a=(ADDRHANDLERL),y SCREENADDRHANDLERL++ y-- } >=0
}

main {
	DMACTL=a=0
	DLISTL=a=&<displaylist
	DLISTH=a=&>displaylist
	COLPF0S=a=0x1D;
	COLPF1S=a=0x1E;
	COLPF2S=a=0x16;
	COLBKS=a=0x14
	DMACTL=a=0b00101010
	{
		{ a=VCOUNT }!=
		draw
	} always
}
